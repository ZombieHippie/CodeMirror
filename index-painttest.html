<!doctype html>

<title>CodeMirror</title>
<meta charset="utf-8"/>

<link rel=stylesheet href="lib/codemirror.css">
<link rel=stylesheet href="doc/docs.css">
<script src="lib/codemirror.js"></script>

<style>
  .CodeMirror { height: auto !important; border: 1px solid #ddd; }
  .CodeMirror-scroll { max-height: 70vh; }
  .CodeMirror pre { padding-left: 7px; line-height: 1.25; }
</style>

<div id=nav>
  <a href="http://codemirror.net"><h1>CodeMirror</h1><img id=logo src="doc/logo.png"></a>

  <ul>
    <li><a class=active data-default="true" href="#description">Home</a>
    <li><a href="doc/manual.html">Manual</a>
    <li><a href="https://github.com/codemirror/codemirror">Code</a>
  </ul>
  <ul>
    <li><a href="#features">Features</a>
    <li><a href="#community">Community</a>
    <li><a href="#browsersupport">Browser support</a>
  </ul>
</div>

<article>

<section id=demo>
  <h2>This is CodeMirror</h2>
  <form name="demoform" style="position: relative; margin-top: .5em;">
<textarea id=demotext>
awldo
awdiaowdmno
Fwawag  awer
 wadwarea
  wrraw
  awda
  awda a
  a
awdawd
awawda
wdawd
wadwaf
wafaw
ge
</textarea>
<input name="cssContent" type="checkbox" onchange="change()">(CHECKED: Use CSS-Content) / (NOT CHECKED: Use TextNode)</input>
</form>
  <script>
    var text = ""
    var count = 1000
    while(count--) {
      //var pos = { line: doc.lastLine(), ch: 0 }
      var str = '\nherllo ' + count + '\n'
      text += str //doc.replaceRange(str, pos, pos, '')
    }
    document.getElementById("demotext").value = text
    var editor
    function change () {
      var useCSSContentLineNumbers = document.forms.demoform["cssContent"].checked
      if (editor != null) { editor.toTextArea() }
      editor = CodeMirror.fromTextArea(document.getElementById("demotext"), {
        lineNumbers: true,
        lineNumberFormatter: function (ln) {
          // simple even odd line formatter
          return ln + (ln % 2 == 0 ? 'e' : 'o');
        },
        viewportMargin: Infinity,
        useCSSContentLineNumbers: useCSSContentLineNumbers
      });
      console.log("updated codemirror to use " + (useCSSContentLineNumbers ? "CSS-Content" : "TextNode"))
    }
    change()
  </script>
